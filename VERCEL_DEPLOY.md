# Инструкция по деплою на Vercel

## Проблема: "The specified name is already used for a different Git repository"

Если при добавлении проекта на Vercel вы видите эту ошибку, это означает, что имя "paintings" уже используется для другого проекта на Vercel.

## Решения

### Решение 1: Использовать другое имя проекта (Рекомендуется)

1. На странице создания проекта в Vercel
2. В поле **"Private Repository Name"** введите другое имя, например:
   - `paintings-app`
   - `paintings-generator`
   - `paintings-exhibition`
   - `paintings-ai`
   - `art-exhibition-generator`

3. Имя проекта на Vercel **не влияет** на:
   - Имя репозитория на GitHub (останется `illanetu/paintings`)
   - URL проекта (будет сгенерирован автоматически)
   - Функциональность приложения

4. Нажмите "Deploy"

### Решение 2: Если проект не виден в списке

Если вы не видите проект "paintings" на Vercel, но имя все равно занято:

- **Просто используйте другое имя** (см. Решение 1) - это самый простой способ
- Возможно, проект находится в другой организации или был удален, но имя зарезервировано
- Имя проекта на Vercel не влияет на функциональность - просто используйте другое имя

### Решение 3: Проверить все организации

Если хотите найти проект:

1. Перейдите на [Vercel Dashboard](https://vercel.com/dashboard)
2. Проверьте все организации/команды в выпадающем списке (верхний левый угол)
3. Если проект найден и не нужен:
   - Откройте настройки проекта (Settings)
   - Прокрутите вниз до раздела "Danger Zone"
   - Нажмите "Delete Project"
4. Если проект не найден - просто используйте другое имя (Решение 1)

## Пошаговая инструкция по деплою

### Шаг 1: Подготовка репозитория

Убедитесь, что код загружен на GitHub:

```powershell
# Проверьте статус
git status

# Если есть незакоммиченные изменения, закоммитьте их
git add .
git commit -m "Подготовка к деплою на Vercel"

# Отправьте на GitHub
git push origin main
```

### Шаг 2: Создание проекта на Vercel

1. Откройте [https://vercel.com/new](https://vercel.com/new)
2. Войдите через GitHub, если еще не вошли
3. В разделе "Import Git Repository" найдите `illanetu/paintings`
4. Нажмите "Import"

### Шаг 3: Настройка проекта

1. **Framework Preset**: Должен автоматически определиться как "Next.js"
2. **Root Directory**: Оставьте пустым (`.`)
3. **Build Command**: `pnpm build` (или `npm run build`)
4. **Output Directory**: `.next` (определяется автоматически)
5. **Install Command**: `pnpm install` (или `npm install`)

### Шаг 4: Настройка переменных окружения

**Важно:** Добавьте переменные окружения перед деплоем!

1. В разделе "Environment Variables" добавьте:

   ```
   AI_API_KEY = ваш_api_ключ_openrouter
   AI_MODEL = openai/gpt-4o
   HTTP_REFERER = https://your-project-name.vercel.app
   ```

2. Для `HTTP_REFERER` используйте домен, который будет у вашего проекта (Vercel покажет его после первого деплоя)

### Шаг 5: Деплой

1. Нажмите "Deploy"
2. Дождитесь завершения сборки (обычно 1-3 минуты)
3. После успешного деплоя вы получите URL вида: `https://your-project-name.vercel.app`

### Шаг 6: Обновление HTTP_REFERER

После первого деплоя:

1. Скопируйте URL вашего проекта
2. Перейдите в Settings → Environment Variables
3. Обновите `HTTP_REFERER` на реальный URL проекта
4. Переразверните проект (Redeploy)

## Автоматический деплой

После настройки проекта, каждый push в ветку `main` на GitHub автоматически запустит новый деплой на Vercel.

## Проверка деплоя

После деплоя проверьте:

1. ✅ Главная страница открывается
2. ✅ Загрузка изображений работает
3. ✅ Генерация описаний работает (проверьте консоль браузера на ошибки API)
4. ✅ Генерация названий выставки работает
5. ✅ Генерация афиши работает

## Решение проблем

### Ошибка: "Build Failed"

- Проверьте логи сборки на Vercel
- Убедитесь, что все зависимости указаны в `package.json`
- Проверьте, что нет ошибок TypeScript: `pnpm run build` локально

### Ошибка: "Environment Variable Missing"

- Убедитесь, что все переменные окружения добавлены в настройках проекта
- Проверьте правильность имен переменных (чувствительны к регистру)

### Ошибка: API не работает

- Проверьте, что `AI_API_KEY` правильно установлен
- Убедитесь, что `HTTP_REFERER` указывает на правильный домен
- Проверьте логи функций на Vercel (Functions → Logs)

### Проект не обновляется после push

- Проверьте, что push был в ветку `main` (или ту, которая настроена)
- Проверьте настройки Git в проекте Vercel
- Убедитесь, что webhook GitHub активен

## Полезные ссылки

- [Vercel Dashboard](https://vercel.com/dashboard)
- [Vercel Documentation](https://vercel.com/docs)
- [Next.js on Vercel](https://vercel.com/docs/frameworks/nextjs)
