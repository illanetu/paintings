# Инструкция по деплою на Vercel

## Проблема: "The specified name is already used for a different Git repository"

Если при добавлении проекта на Vercel вы видите эту ошибку, это означает, что имя "paintings" уже используется для другого проекта на Vercel.

## Решения

### Решение 1: Использовать другое имя проекта (Рекомендуется)

1. На странице создания проекта в Vercel
2. В поле **"Private Repository Name"** введите другое имя, например:
   - `paintings-app`
   - `paintings-generator`
   - `paintings-exhibition`
   - `paintings-ai`
   - `art-exhibition-generator`

3. Имя проекта на Vercel **не влияет** на:
   - Имя репозитория на GitHub (останется `illanetu/paintings`)
   - URL проекта (будет сгенерирован автоматически)
   - Функциональность приложения

4. Нажмите "Deploy"

### Решение 2: Репозиторий не виден в списке (проблема с правами доступа)

Если вы авторизованы через GitHub, но репозиторий `illanetu/paintings` не отображается в списке:

**Причина:** Vercel не имеет доступа к этому репозиторию из-за ограниченных прав GitHub App.

**Решение:**

1. На странице импорта репозитория найдите ссылку **"Adjust GitHub App Permissions →"** (внизу страницы)
2. Нажмите на эту ссылку - откроется страница настроек GitHub App
3. Выберите нужные репозитории:
   - **Вариант A (рекомендуется):** Выберите "Only select repositories" и добавьте `paintings`
   - **Вариант B:** Выберите "All repositories" (если хотите дать доступ ко всем репозиториям)
4. Нажмите "Save" или "Install"
5. Вернитесь на страницу [https://vercel.com/new](https://vercel.com/new)
6. Обновите страницу (F5) или нажмите кнопку обновления списка репозиториев
7. Теперь репозиторий `illanetu/paintings` должен появиться в списке

**Альтернативный способ через GitHub:**

1. Перейдите на GitHub: [https://github.com/settings/installations](https://github.com/settings/installations)
2. Найдите "Vercel" в списке установленных приложений
3. Нажмите "Configure" рядом с Vercel
4. В разделе "Repository access" выберите "Only select repositories"
5. Добавьте репозиторий `paintings` в список
6. Нажмите "Save"
7. Вернитесь на Vercel и обновите страницу

### Решение 3: Проверить все организации

Если хотите найти проект:

1. Перейдите на [Vercel Dashboard](https://vercel.com/dashboard)
2. Проверьте все организации/команды в выпадающем списке (верхний левый угол)
3. Если проект найден и не нужен:
   - Откройте настройки проекта (Settings)
   - Прокрутите вниз до раздела "Danger Zone"
   - Нажмите "Delete Project"
4. Если проект не найден - просто используйте другое имя (Решение 1)

## Пошаговая инструкция по деплою

### Шаг 1: Подготовка репозитория

Убедитесь, что код загружен на GitHub:

```powershell
# Проверьте статус
git status

# Если есть незакоммиченные изменения, закоммитьте их
git add .
git commit -m "Подготовка к деплою на Vercel"

# Отправьте на GitHub
git push origin main
```

### Шаг 2: Создание проекта на Vercel

1. Откройте [https://vercel.com/new](https://vercel.com/new)
2. Войдите через GitHub, если еще не вошли
3. В разделе "Import Git Repository" найдите `illanetu/paintings`
4. **Если репозиторий не виден:**
   - Нажмите на ссылку "Adjust GitHub App Permissions →" внизу страницы
   - Настройте доступ к репозиторию `paintings` (см. Решение 2 выше)
   - Вернитесь и обновите страницу
5. Нажмите "Import" рядом с репозиторием `illanetu/paintings`

### Шаг 3: Настройка проекта

1. **Framework Preset**: Должен автоматически определиться как "Next.js"
2. **Root Directory**: Оставьте пустым (`.`)
3. **Build Command**: `pnpm build` (или `npm run build`)
4. **Output Directory**: `.next` (определяется автоматически)
5. **Install Command**: `pnpm install` (или `npm install`)

### Шаг 4: Настройка переменных окружения

**Важно:** Добавьте переменные окружения перед деплоем!

1. В разделе "Environment Variables" добавьте:

   ```
   AI_API_KEY = ваш_api_ключ_openrouter
   AI_MODEL = openai/gpt-4o
   HTTP_REFERER = https://your-project-name.vercel.app
   ```

2. Для `HTTP_REFERER` используйте домен, который будет у вашего проекта (Vercel покажет его после первого деплоя)

### Шаг 5: Деплой

1. Нажмите "Deploy"
2. Дождитесь завершения сборки (обычно 1-3 минуты)
3. После успешного деплоя вы получите URL вида: `https://your-project-name.vercel.app`

### Шаг 6: Обновление HTTP_REFERER

После первого деплоя:

1. Скопируйте URL вашего проекта
2. Перейдите в Settings → Environment Variables
3. Обновите `HTTP_REFERER` на реальный URL проекта
4. Переразверните проект (Redeploy)

## Автоматический деплой

После настройки проекта, каждый push в ветку `main` на GitHub автоматически запустит новый деплой на Vercel.

## Проверка деплоя

После деплоя проверьте:

1. ✅ Главная страница открывается
2. ✅ Загрузка изображений работает
3. ✅ Генерация описаний работает (проверьте консоль браузера на ошибки API)
4. ✅ Генерация названий выставки работает
5. ✅ Генерация афиши работает

## Решение проблем

### Ошибка: "Build Failed"

- Проверьте логи сборки на Vercel
- Убедитесь, что все зависимости указаны в `package.json`
- Проверьте, что нет ошибок TypeScript: `pnpm run build` локально

### Ошибка: "Environment Variable Missing"

- Убедитесь, что все переменные окружения добавлены в настройках проекта
- Проверьте правильность имен переменных (чувствительны к регистру)

### Ошибка: API не работает

- Проверьте, что `AI_API_KEY` правильно установлен
- Убедитесь, что `HTTP_REFERER` указывает на правильный домен
- Проверьте логи функций на Vercel (Functions → Logs)

### Проект не обновляется после push

- Проверьте, что push был в ветку `main` (или ту, которая настроена)
- Проверьте настройки Git в проекте Vercel
- Убедитесь, что webhook GitHub активен

### Репозиторий не отображается в списке

- См. **Решение 2** в начале документа - настройте права доступа GitHub App
- Убедитесь, что репозиторий существует и доступен вашему GitHub-аккаунту
- Проверьте, что вы авторизованы с правильным GitHub-аккаунтом (в выпадающем списке должен быть `illanetu`)

## Полезные ссылки

- [Vercel Dashboard](https://vercel.com/dashboard)
- [Vercel Documentation](https://vercel.com/docs)
- [Next.js on Vercel](https://vercel.com/docs/frameworks/nextjs)
